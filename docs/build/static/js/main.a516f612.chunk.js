(this["webpackJsonptron-game"]=this["webpackJsonptron-game"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),i=n.n(c),o=(n(11),n(5)),u=n(1),l=(n(12),{LEFT:{x:-15,y:0},RIGHT:{x:15,y:0},UP:{x:0,y:-15},DOWN:{x:0,y:15}}),s={color:"#AB1091",id:"1",keys:{38:l.UP,39:l.RIGHT,40:l.DOWN,37:l.LEFT},direction:l.RIGHT,position:{x:90,y:90},hasDied:!1,instructions:"Usa las flechas de direcci\xf3n"},f={color:"#0000CC",id:"2",keys:{87:l.UP,68:l.RIGHT,83:l.DOWN,65:l.LEFT},direction:l.LEFT,position:{x:645,y:645},hasDied:!1,instructions:"Usa las teclas AWSD"};var m=function(e){var t=e.players,n=e.gameStatus,c=Object(a.useRef)();return Object(a.useEffect)((function(){if(1===n){var e=c.current.getContext("2d");e.clearRect(0,0,750,750),e.beginPath(),e.strokeStyle="#001900";for(var t=30;t<=750;t+=30)e.moveTo(t,0),e.lineTo(t,750);for(var a=30;a<=750;a+=30)e.moveTo(0,a),e.lineTo(750,a);e.stroke(),e.closePath()}}),[n]),Object(a.useEffect)((function(){var e=c.current.getContext("2d");t.forEach((function(t){e.fillStyle=t.color,e.fillRect(t.position.x,t.position.y,15,15)}))}),[t]),r.a.createElement(a.Fragment,null,r.a.createElement("canvas",{ref:c,id:"board",width:750,height:750,className:"board"}),r.a.createElement("div",{className:"instructions"},t.map((function(e){return r.a.createElement("div",{className:"instructions__player",style:{color:e.color},key:"player--".concat(e.id)},"".concat(e.id,": ").concat(e.instructions))}))),r.a.createElement("a",{href:"https://github.com/laugeeme",alt:"laugeeme",className:"signature"},"By laugeeme"))};var p=function(e){var t=e.children,n=e.onClick;return r.a.createElement("button",{className:"button",onClick:n},t)};var y=function(e){var t=e.onClick;return r.a.createElement("div",{className:"play-info"}," ",r.a.createElement(p,{onClick:t},"Comenzar"))};var d=function(e){var t=e.result,n=e.onClick;return r.a.createElement("div",{className:"play-info"},r.a.createElement("h1",null,t),r.a.createElement(p,{onClick:n},"Volver a jugar"))};var v=n(2);function b(e,t){return Object.keys(e).reduce((function(n,a){return Object(u.a)(Object(u.a)({},n),{},Object(v.a)({},a,e[a]+t[a]))}),{})}function g(e,t){var n=b(e,t);return Object.keys(n).filter((function(e){return 0!==n[e]})).length>0}function E(e,t){return"".concat(e).concat(t)}var h=[s,f],k={players:h,playableCells:function(e,t,n){for(var a=[],r=0;r<e/t;r++)for(var c=0;c<e/t;c++){var i=E(r*t,c*t);n.includes(i)||a.push(i)}return a}(750,15,h.map((function(e){return E(e.position.x,e.position.y)}))),gameStatus:1};function O(e,t){if("start"===t.type)return Object(u.a)(Object(u.a)({},k),{},{gameStatus:2});if("restart"===t.type)return Object(u.a)(Object(u.a)({},k),{},{gameStatus:1});if("move"===t.type){var n=e.players.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{position:b(e.position,e.direction)})})),a=n.map((function(t){var a=E(t.position.x,t.position.y);return Object(u.a)(Object(u.a)({},t),{},{hasDied:!e.playableCells.includes(a)||n.filter((function(e){return e.id!==t.id})).map((function(e){return E(e.position.x,e.position.y)})).includes(a)})})),r=e.players.map((function(e){return E(e.position.x,e.position.y)}));return{players:a,playableCells:e.playableCells.filter((function(e){return!r.includes(e)})),gameStatus:0===a.filter((function(e){return e.hasDied})).length?2:3}}return"changeDirection"===t.type?{players:e.players.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{direction:e.keys[t.key]&&g(e.direction,e.keys[t.key])?e.keys[t.key]:e.direction})})),playableCells:e.playableCells,gameStatus:e.gameStatus}:void 0}var j=function(){var e=null,t=Object(a.useReducer)(O,k),n=Object(o.a)(t,2),c=n[0],i=n[1];function u(){i({type:"start"})}function l(){i({type:"restart"})}if(c.players.filter((function(e){return e.hasDied})).length,function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){i({type:"move"})}),2!==c.gameStatus?null:100),Object(a.useEffect)((function(){function e(e){var t="".concat(e.keyCode);"13"===t&&(1===c.gameStatus&&u(),3===c.gameStatus&&l()),i({type:"changeDirection",key:t})}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[c.gameStatus]),3===c.gameStatus){var s=c.players.filter((function(e){return!e.hasDied}));e=0===s.length?"Empate":"Ganador: ".concat(s.map((function(e){return"Jugador ".concat(e.id)})).join("."))}return r.a.createElement(a.Fragment,null,r.a.createElement(m,{players:c.players,gameStatus:c.gameStatus}),3===c.gameStatus&&r.a.createElement(d,{onClick:l,result:e}),1===c.gameStatus&&r.a.createElement(y,{onClick:u}))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}],[[6,1,2]]]);
//# sourceMappingURL=main.a516f612.chunk.js.map